
<!-- How to Defer Parsing of Javascript for YouTube Iframe Videos  /-->
<!-- The key to making this work is a little bit of editing of the YouTube embed code. This will prevent the video from loading during the initial page render. /-->

<!-- 1. We need to remove the link from the iframe’s src attribute, so we are left with src=”” /-->
<!-- 2. add a data-src attribute /-->
<!-- 3. add the link from the original src attribute to the data-src attribute /-->

<!--/*

Google PageSpeed still indicated that the page load was blocking due to a third party script (youtube).
We wrapped the javascript code that adds the src parameter in a setTimeout() function. 
That worked, an Google PageSpeed is no longer complaining about third party scripts.
Interestingly though, a timeout of 500ms didn’t work – we had to delay it for a full second.

Loading the video immediately when the onload event is fired should be fine, since at that point the user sees the entire site.
Maybe google still thinks it’s a problem because the page isn’t interactive until after the scripts are done running?

*/-->


<iframe width="560" height="315" src="" data-src="https://www.youtube.com/embed/Hpv3jqmYRjk" frameborder="0" allowfullscreen></iframe>



<script type="text/javascript">
    function init() {
      setTimeout(function () {
        var vidDefer = document.getElementsByTagName(‘iframe’);
        for (var i = 0; i < vidDefer.length; i++) {
          if (vidDefer[i].getAttribute('data-src')) {
            vidDefer[i].setAttribute('src', vidDefer[i].getAttribute('data-src'));
          }
        }
      }, 1000);
    }
    window.onload = init;
</script>
